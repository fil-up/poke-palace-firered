---
phase: 13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pokefirered/src/quiz/quiz_hooks.c
autonomous: true
must_haves:
  truths:
    - "Status and special moves remain selectable while quiz battles still apply uniform damage rules."
    - "Wrong answers always cost half current HP (min 1) and correct answers deal fixed 1000 damage."
    - "Crits, type effectiveness, accuracy, and PP do not change quiz outcomes, while Safari battles stay vanilla."
  artifacts:
    - path: "pokefirered/src/quiz/quiz_hooks.c"
      provides: "Quiz battle rules (damage/accuracy/PP/type/crit) and move list normalization."
  key_links:
    - from: "pokefirered/src/quiz/quiz_hooks.c"
      to: "pokefirered/src/quiz/quiz.c"
      via: "Quiz_IsActive gate"
      pattern: "Quiz_IsActive"
    - from: "pokefirered/src/quiz/quiz_hooks.c"
      to: "pokefirered/include/constants/battle.h"
      via: "Safari exclusion"
      pattern: "BATTLE_TYPE_SAFARI"
---

<objective>
Normalize quiz battle rules to uniform damage/accuracy while keeping all moves selectable, and ensure Safari battles are excluded.

Purpose: Align battle behavior with Phase 13 rules without touching engine files.
Output: Updated quiz hooks implementing uniform damage/accuracy/PP/type/crit rules and relaxed move replacement.
</objective>

<execution_context>
@C:\Users\phill\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\phill\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-CONTEXT.md
@.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-RESEARCH.md
@pokefirered/src/quiz/quiz_hooks.c
@pokefirered/include/battle.h
@pokefirered/include/pokemon.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Keep original moves, fill only empty slots</name>
  <files>pokefirered/src/quiz/quiz_hooks.c</files>
  <action>
Update `QuizHooks_FillPartyMoves` and `QuizHooks_FillEnemyMoves` so they only replace `MOVE_NONE` slots and do NOT replace non-damage/status moves. Keep the filler-move uniqueness logic intact, and skip the entire fill pass in Safari battles.
  </action>
  <verify>
`rg "MOVE_NONE" pokefirered/src/quiz/quiz_hooks.c` shows replacements gated to empty slots only, and Safari guard exists.
  </verify>
  <done>
Status moves remain in the move list; only empty slots get filled (Safari unaffected).
  </done>
</task>

<task type="auto">
  <name>Task 2: Gate quiz-only overrides (accuracy/PP/type/secondary)</name>
  <files>pokefirered/src/quiz/quiz_hooks.c</files>
  <action>
Introduce a small helper like `QuizHooks_IsQuizBattle()` that returns `Quiz_IsActive()` and excludes Safari via `gBattleTypeFlags & BATTLE_TYPE_SAFARI`. Use it to gate:
- `QuizHooks_ShouldAlwaysHit`
- `QuizHooks_ShouldInfinitePp`
- `QuizHooks_ShouldDisableSecondaryEffects`
- `QuizHooks_ShouldIgnoreTypeImmunity`
- `QuizHooks_ShouldForcePlayerFirst` (ensure Safari behaves normally)
  </action>
  <verify>
`rg "QuizHooks_IsQuizBattle|BATTLE_TYPE_SAFARI" pokefirered/src/quiz/quiz_hooks.c` shows the unified guard.
  </verify>
  <done>
Always-hit, infinite PP, and type/secondary suppression only apply to quiz battles, not Safari.
  </done>
</task>

<task type="auto">
  <name>Task 3: Enforce uniform damage + disable crit/type result flags</name>
  <files>pokefirered/src/quiz/quiz_hooks.c</files>
  <action>
In `QuizHooks_ApplyDamageOverride`, when in a quiz battle:
- For player wrong answers (including capture/gym wrong), set outgoing damage to 0 (no enemy damage).
- For player correct answers that should deal damage, set fixed 1000 (keep existing capture/gym exceptions that intentionally do 0).
- For enemy attacks, set damage to half **current** HP (min 1).
- Force `gCritMultiplier = 1`.
- Clear type-effect result flags so "super effective" or "no effect" text never appears in quiz mode.
- Clear critical-hit result flags (e.g., `MOVE_RESULT_CRITICAL`) so "critical hit!" messaging never appears.
  </action>
  <verify>
`rg "gCritMultiplier|MOVE_RESULT_CRITICAL|MOVE_RESULT_SUPER_EFFECTIVE|MOVE_RESULT_NOT_VERY_EFFECTIVE" pokefirered/src/quiz/quiz_hooks.c` shows the resets.
  </verify>
  <done>
Quiz battles always use fixed damage rules, no critical hits, and no type-effectiveness messaging.
  </done>
</task>

</tasks>

<verification>
1. Build: `cd pokefirered && make -j$(nproc)` succeeds.
2. In-game: a status move (e.g., Growl) remains selectable; correct answer KOs; wrong answer halves current HP.
3. In-game: no "critical hit!" or "super effective" messages in quiz battles.
</verification>

<success_criteria>
- All moves remain selectable while quiz damage/accuracy behavior is uniform and deterministic.
- Wrong answers always cost half current HP (min 1); correct answers deal fixed 1000 when damage is intended.
- Safari battles retain vanilla behavior (no quiz overrides).
</success_criteria>

<output>
After completion, create `.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-01-SUMMARY.md`
</output>
