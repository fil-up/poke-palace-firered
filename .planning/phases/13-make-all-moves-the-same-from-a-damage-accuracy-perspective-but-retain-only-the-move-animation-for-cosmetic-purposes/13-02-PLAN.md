---
phase: 13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes
plan: 02
type: execute
wave: 2
depends_on: ["13-01"]
files_modified:
  - pokefirered/src/quiz/quiz_hooks.c
autonomous: true
must_haves:
  truths:
    - "Self/field-targeting moves animate on the opponent in quiz battles."
    - "Multi-hit moves show a single-hit animation in quiz battles."
  artifacts:
    - path: "pokefirered/src/quiz/quiz_hooks.c"
      provides: "Animation targeting and multihit clamping for quiz battles."
  key_links:
    - from: "pokefirered/src/quiz/quiz_hooks.c"
      to: "pokefirered/include/pokemon.h"
      via: "gBattleMoves[move].target checks"
      pattern: "gBattleMoves\\[.*\\]\\.target"
    - from: "pokefirered/src/quiz/quiz_hooks.c"
      to: "pokefirered/src/battle_main.c"
      via: "gMultiHitCounter clamp"
      pattern: "gMultiHitCounter"
---

<objective>
Force cosmetic move animations to target the opponent and clamp multi-hit visuals to single-hit in quiz battles.

Purpose: Preserve original move animations while preventing self/field targeting and multi-hit spam.
Output: Quiz hook updates that coerce targets and clamp multihit state without touching engine files.
</objective>

<execution_context>
@C:\Users\phill\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\phill\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-CONTEXT.md
@.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-RESEARCH.md
@pokefirered/src/quiz/quiz_hooks.c
@pokefirered/include/battle.h
@pokefirered/include/pokemon.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Coerce animation target to opponent</name>
  <files>pokefirered/src/quiz/quiz_hooks.c</files>
  <action>
Add a small helper that, in quiz battles, checks `gBattleMoves[move].target` and overrides `gBattlerTarget` to `GetDefaultMoveTarget(attacker)` for user/field/other non-selected targets (e.g., `MOVE_TARGET_USER`, `MOVE_TARGET_USER_OR_SELECTED`, `MOVE_TARGET_OPPONENTS_FIELD`, `MOVE_TARGET_FOES_AND_ALLY`, `MOVE_TARGET_BOTH`). Call this helper early in `QuizHooks_ApplyDamageOverride` so it runs before attack animations and HP updates.
  </action>
  <verify>
`rg "GetDefaultMoveTarget|MOVE_TARGET_USER" pokefirered/src/quiz/quiz_hooks.c` shows the target coercion logic.
  </verify>
  <done>
Self/field moves animate on the opponent in quiz battles without changing move names or summaries.
  </done>
</task>

<task type="auto">
  <name>Task 2: Clamp multi-hit visuals to single hit</name>
  <files>pokefirered/src/quiz/quiz_hooks.c</files>
  <action>
When in a quiz battle, clamp `gMultiHitCounter` to 1 before animation/damage resolution. Implement this as a helper called from `QuizHooks_ApplyDamageOverride` so multi-hit moves render once while still using the fixed damage override.
  </action>
  <verify>
`rg "gMultiHitCounter" pokefirered/src/quiz/quiz_hooks.c` shows the clamp.
  </verify>
  <done>
Multi-hit moves animate once in quiz battles.
  </done>
</task>

</tasks>

<verification>
1. Build: `cd pokefirered && make -j$(nproc)` succeeds.
2. In-game: Swords Dance or Recover animates on the opponent, not the user.
3. In-game: Double Slap or Fury Attack shows a single-hit animation.
</verification>

<success_criteria>
- Move animations always target the opponent in quiz battles, regardless of original target.
- Multi-hit animations render only once in quiz battles.
</success_criteria>

<output>
After completion, create `.planning/phases/13-make-all-moves-the-same-from-a-damage-accuracy-perspective-but-retain-only-the-move-animation-for-cosmetic-purposes/13-02-SUMMARY.md`
</output>
